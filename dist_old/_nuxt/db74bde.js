(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{665:function(e,t,r){var content=r(730);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(19).default)("5ca76978",content,!0,{sourceMap:!1})},729:function(e,t,r){"use strict";r(665)},730:function(e,t,r){var n=r(18)((function(i){return i[1]}));n.push([e.i,".v-card--reveal{bottom:0;opacity:1!important;position:absolute;width:100%}",""]),n.locals={},e.exports=n},772:function(e,t,r){"use strict";r.r(t);var n=r(641),o=r(232),c=r(215),l=r(180),m=r(757),d=r(621),f=r(758),v=r(639),_=r(633),x=r(606),h=r(756),k=r(616),O=r(636),$=(r(10),r(13),r(12),r(5),r(16),r(11),r(17),r(24)),w=r(3),y=(r(79),r(1)),D=r.n(y);function j(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function S(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?j(Object(source),!0).forEach((function(t){Object(w.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):j(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}D.a.locale("pt-br");var I={props:["item","isEdit","open","listaSelecao"],beforeMount:function(){!this.item.empresas_id&&(this.item.empresas_id=this.$store.state.user.empresas_id)},data:function(){var e=this;return{parceiraInea:null,menu1:!1,menu2:!1,dataInicio:null,dataFim:null,valid:!0,msgErroDatas:"",tituloPagina:"Cadastro de Agendamento",deleteConfirme:!1,itemOld:S({},this.item),status:[{id:1,descri:"ATIVO"},{id:2,descri:"INATIVO"}],rules:{required:function(e){return!!e||"Requerido!"},cnpjValido:function(t){return e.$cnpjValido(t)||"CNPJ inválido!"},dataInicioMenor:function(t){return!e.dataInicioMenor(t)||"A data final precisa ser igual ou maior!"},dataFimMaior:function(t){return!e.dataFimMaior(t)||"A data final precisa ser igual ou maior!"}}}},computed:{desativarCampoEmpresas:function(){return 1!==this.$store.state.user.user_tipo_id&&!this.$store.state.user.parceira_inea},computedDataInicio:function(){return D.a.locale("pt-br"),this.item.data_inicio?D.a.utc(this.item.data_inicio).format("L"):""},computedDataFim:function(){return D.a.locale("pt-br"),this.item.data_fim?D.a.utc(this.item.data_fim).format("L"):""}},methods:{dataInicioMenor:function(data){},dataFimMaior:function(data){},checkDatas:function(e,t){return D()(e).isSameOrBefore(t)?(this.msgErroDatas="",!0):(this.msgErroDatas="Data inicial precisa ser menor!",!1)},salvarItem:function(e){var t=this;return Object($.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.checkDatas(t.item.data_inicio,t.item.data_fim)){r.next=2;break}return r.abrupt("return");case 2:if(t.$refs.form.validate()){r.next=4;break}return r.abrupt("return");case 4:t.foiAlterado()?t.isEdit?t.updateItem(e):t.createItem(e):(t.$emit("close"),t.exibSnack("Registro salvo com sucesso!","success"));case 5:case"end":return r.stop()}}),r)})))()},foiAlterado:function(){return JSON.stringify(this.itemOld)!==JSON.stringify(this.item)},createItem:function(e){var t=this;return Object($.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,delete e.id,r.next=4,t.$axios.$post("/agendamento",e);case 4:t.$emit("atualizarListagem"),t.$emit("close"),t.exibSnack("Registro salvo com sucesso!","success"),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(0),t.exibSnack("Não foi possível salvar o registro! Verifique os dados e tente novamente","error"),console.log(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},updateItem:function(e){var t=this;return Object($.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$axios.$put("/agendamento/".concat(e.id),e);case 3:t.$emit("atualizarListagem"),t.$emit("close"),t.exibSnack("Registro salvo com sucesso!","success"),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),t.exibSnack("Não foi possível salvar o registro! Verifique os dados e tente novamente","error"),console.log(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,8]])})))()},cancelarRegistro:function(){this.$emit("close")},deleteItem:function(e){var t=this;return Object($.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$axios.$delete("/agendamento/".concat(e.id));case 3:t.$emit("atualizarListagem"),t.$emit("close"),t.exibSnack("Registro exluído com sucesso!","success"),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),t.exibSnack("Não foi possível excluir o registro!","error"),console.log(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,8]])})))()},exibSnack:function(e,t){this.$emit("exibSnack",e,t)}}},P=(r(729),r(58)),component=Object(P.a)(I,(function(){var e=this,t=e._self._c;return t(v.a,{attrs:{persistent:""},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[t(c.a,[t(l.c,{staticClass:"green lighten-1 white--text"},[e._v("\n            "+e._s(e.tituloPagina)+"\n        ")]),e._v(" "),t(l.b,[t(_.a,{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(d.a,[t(h.a,[t(m.a,{attrs:{cols:"12",sm:"6",md:"8"}},[t(n.a,{attrs:{rules:[e.rules.required],label:"Propriedades",outlined:"","auto-select-first":"",dense:"",items:e.listaSelecao.propriedades,"item-text":function(e){return e.nome},"item-value":function(e){return e.id}},model:{value:e.item.propriedades_id,callback:function(t){e.$set(e.item,"propriedades_id",t)},expression:"item.propriedades_id"}})],1),e._v(" "),t(m.a,{attrs:{cols:"12",sm:"6",md:"2"}},[t(x.a,{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function(r){var n=r.on,o=r.attrs;return[t(O.a,e._g(e._b({attrs:{value:e.computedDataInicio,"error-messages":e.msgErroDatas,label:"Data do início",readonly:"",outlined:"",dense:""}},"v-text-field",o,!1),n))]}}]),model:{value:e.menu1,callback:function(t){e.menu1=t},expression:"menu1"}},[e._v(" "),t(f.a,{on:{input:function(t){e.menu1=!1}},model:{value:e.item.data_inicio,callback:function(t){e.$set(e.item,"data_inicio",t)},expression:"item.data_inicio"}})],1)],1),e._v(" "),t(m.a,{attrs:{cols:"12",sm:"6",md:"2"}},[t(x.a,{attrs:{"close-on-content-click":!1,"max-width":"290"},scopedSlots:e._u([{key:"activator",fn:function(r){var n=r.on,o=r.attrs;return[t(O.a,e._g(e._b({attrs:{value:e.computedDataFim,"error-messages":e.msgErroDatas,label:"Data do fim",readonly:"",outlined:"",dense:""},on:{"click:clear":function(t){e.item.data_fim=null}}},"v-text-field",o,!1),n))]}}]),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[e._v(" "),t(f.a,{on:{change:function(t){e.menu2=!1}},model:{value:e.item.data_fim,callback:function(t){e.$set(e.item,"data_fim",t)},expression:"item.data_fim"}})],1)],1),e._v(" "),t(m.a,{attrs:{cols:"12",sm:"6",md:"2"}},[t(O.a,{attrs:{type:"number",rules:[e.rules.required],label:"Área queima",outlined:"",dense:"","hide-spin-buttons":""},model:{value:e.item.area_queima,callback:function(t){e.$set(e.item,"area_queima",t)},expression:"item.area_queima"}})],1),e._v(" "),t(m.a,{attrs:{cols:"12",sm:"6",md:"2"}},[t(O.a,{attrs:{rules:[e.rules.required],label:"Talhão",outlined:"",dense:""},model:{value:e.item.talhao,callback:function(t){e.$set(e.item,"talhao",t)},expression:"item.talhao"}})],1),e._v(" "),t(m.a,{attrs:{cols:"12",sm:"6",md:"8"}},[t(n.a,{attrs:{label:"Empresas",outlined:"","auto-select-first":"",dense:"",items:e.listaSelecao.empresas,"item-text":function(e){return e.nome},"item-value":function(e){return e.id},disabled:e.desativarCampoEmpresas},model:{value:e.item.empresas_id,callback:function(t){e.$set(e.item,"empresas_id",t)},expression:"item.empresas_id"}})],1)],1),e._v(" "),t("dialogConfirme",{attrs:{"dlg-confirme":e.deleteConfirme,texto:"Tem certeza que deseja excluir este registro?",cor:"error",titulo:"Confirme exclusão!"},on:{sim:function(t){return e.deleteItem(e.item)},nao:function(t){e.deleteConfirme=!1}}})],1)],1)],1),e._v(" "),t(l.a,[t(k.a),e._v(" "),t(o.a,{attrs:{color:"success",elevation:"2",outlined:"",dense:""},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.salvarItem(e.item)}}},[e._v("Salvar\n            ")]),e._v(" "),t(o.a,{attrs:{color:"secondary",elevation:"2",outlined:"",dense:""},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.cancelarRegistro.apply(null,arguments)}}},[e._v("\n                Cancelar")]),e._v(" "),t(o.a,{attrs:{color:"error",elevation:"2",outlined:"",dense:"",disabled:!e.isEdit},on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.deleteConfirme=!0}}},[e._v("Excluir\n            ")]),e._v(" "),t(k.a)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);