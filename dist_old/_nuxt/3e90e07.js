(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{624:function(e,t,n){"use strict";n.r(t);var r=n(215),o=n(180),l=n(639),c=n(216),d={props:["isLoading","texto","cor"]},m=n(58),component=Object(m.a)(d,(function(){var e=this,t=e._self._c;return t(l.a,{attrs:{scrim:!1,persistent:"",width:"auto"},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[t(r.a,{attrs:{color:e.cor||"primary"}},[t(o.b,[t("span",{staticClass:"white--text"},[e._v(e._s(e.texto))]),e._v(" "),t(c.a,{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports},762:function(e,t,n){"use strict";n.r(t);var r=n(232),o=n(215),l=n(180),c=n(757),d=n(621),m=n(759),f=n(212),v=n(756),x=n(616),_=n(636),h=(n(27),n(225),n(24));n(79);function k(e){var t,n,r,o;return null!=e&&e.id?{id:e.id,nome:e.nome||"",cpf_cnpj:e.cpf_cnpj||null,email:e.email||null,telefone:e.telefone||null,obs:e.obs||null,empresas_id:e.empresas_id||null,pessoas_tipo_id:e.pessoas_tipo_id||null,usuario:{id:(null===(t=e.usuario)||void 0===t?void 0:t.id)||null,login:(null===(n=e.usuario)||void 0===n?void 0:n.login)||null,senha:null,pessoas_id:e.id,pessoas_tipo_id:(null===(r=e.usuario)||void 0===r?void 0:r.pessoas_tipo_id)||4,ativo_status_id:(null===(o=e.usuario)||void 0===o?void 0:o.ativo_status_id)||2}}:{id:null,nome:"",cpf_cnpj:"",email:"",telefone:"",obs:null,empresas_id:null,pessoas_tipo_id:4,usuario:{login:null,senha:null,pessoas_tipo_id:4,ativo_status_id:1}}}var C={asyncData:function(e){return Object(h.a)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$axios,r=[],t.prev=2,t.next=5,n.$get("/pessoas/?tipo=4");case 5:return o=t.sent,r=null!=o&&o.erro?[]:o.dados.registros,t.abrupt("return",{listagem:r});case 10:return t.prev=10,t.t0=t.catch(2),console.log(t.t0),t.abrupt("return",{listagem:r});case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()},name:"fiscais",middleware:"auth",data:function(){return{itemSelect:null,dlgConfirme:!1,exibCadastro:!1,isEdit:!1,isLoading:!1,search:"",headers:[{text:"Código",value:"id",align:"left",margin:"12px"},{text:"Nome",value:"nome",align:"left"},{text:"Telefone",value:"telefone",align:"center"},{text:"Email",value:"email",align:"center"},{text:"Ações",value:"actions",sortable:!1,align:"right"}],exibLista:!1,payload:k(),snack:{active:!1,text:"teste",timeout:2e3,color:"primary"}}},filters:{zeroLeft:function(e){return e.toLocaleString("en-US",{minimumIntegerDigits:6,useGrouping:!1})}},methods:{corStatus:function(e){return 1==e?"green--text":2==e?"red--text":void 0},novoItem:function(){this.payload=k(),this.isEdit=!1,this.exibCadastro=!0},exibSnack:function(e,t){this.snack.color=t||"",this.snack.text=e||"",this.snack.active=!0},confirmeExclusao:function(e){this.itemSelect=e,this.dlgConfirme=!0},atualizarListagem:function(){var e=this;return Object(h.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("/pessoas/?tipo=4");case 3:null!=(n=t.sent)&&n.erro?e.listagem=[]:e.listagem=n.dados.registros,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),e.listagem=[],console.log({error:t.t0});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},excluirItem:function(){var e=this;return Object(h.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.itemSelect.id,t.prev=1,t.next=4,e.$axios.$delete("/pessoa/".concat(n));case 4:e.exibSnack("Cliente excluído com sucesso!","success"),e.atualizarListagem(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),e.exibSnack("Não foi possível excluir este cliente","error"),console.log(t.t0);case 12:e.dlgConfirme=!1,e.itemSelect=null;case 14:case"end":return t.stop()}}),t,null,[[1,8]])})))()},exibirItem:function(e){var t=this;return Object(h.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.id,n.prev=1,n.next=4,t.$axios.$get("/pessoa/".concat(r));case 4:(o=n.sent).usuario=o.usuario[0]||null,t.payload=k(o),t.exibCadastro=!0,t.isEdit=!0,n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),console.log(n.t0);case 14:case"end":return n.stop()}}),n,null,[[1,11]])})))()},cancelar:function(){this.payload=k(),this.exibCadastro=!1}}},w=n(58),component=Object(w.a)(C,(function(){var e=this,t=e._self._c;return t(v.a,{staticClass:"mb-4",attrs:{justify:"center"}},[t(c.a,{attrs:{cols:"12"}},[t(o.a,{staticClass:"p-3"},[t(l.c,[t("h4",[e._v("Lista de Fiscais")]),e._v(" "),t(x.a),e._v(" "),t(_.a,{attrs:{"append-icon":"mdi-magnify",label:"Pesquisar","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),t(m.a,{attrs:{headers:e.headers,items:e.listagem,search:e.search,dense:"","mobile-breakpoint":"400"},scopedSlots:e._u([{key:"item.actions",fn:function(n){var r=n.item;return[t(f.a,{on:{click:function(t){return t.preventDefault(),e.exibirItem(r)}}},[e._v("mdi-pencil")])]}},{key:"item.ativo_status.descricao",fn:function(n){var r=n.item;return[t("div",{class:["justfy-center",e.corStatus(r.ativo_status_id)]},[e._v(e._s(r.ativo_status.descricao))])]}},{key:"item.id",fn:function(t){var n=t.item;return[e._v("\n                    "+e._s(e._f("zeroLeft")(n.id))+"\n                ")]}}])})],1)],1),e._v(" "),t(c.a,{attrs:{cols:"12"}},[t(o.a,{staticClass:"panel-bottom"},[t(d.a,[t(r.a,{attrs:{color:"primary",elevation:"2",outlined:""},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.novoItem.apply(null,arguments)}}},[e._v("Novo")])],1)],1)],1),e._v(" "),e.exibCadastro?t("fiscalCadastro",{attrs:{open:e.exibCadastro,isEdit:e.isEdit,item:e.payload},on:{close:function(t){e.exibCadastro=!1},cancelar:e.cancelar,atualizarListagem:e.atualizarListagem,exibSnack:e.exibSnack}}):e._e(),e._v(" "),e.isLoading?t("DialogLoading",{attrs:{"is-loading":e.isLoading,cor:"purple lighten-1",texto:"Atualizando dados..."}}):e._e(),e._v(" "),e.dlgConfirme?t("DialogConfirmacao",{attrs:{"dlg-confirme":e.dlgConfirme,cor:"red--text lighten-2",titulo:"Exclusão de registro.",texto:"Tem certeza que deseja excluir este registro?"},on:{nao:function(t){e.dlgConfirme=!1},sim:e.excluirItem}}):e._e(),e._v(" "),e.snack.active?t("snackbar",{attrs:{snack:e.snack},on:{close:function(t){e.snack.active=!1}}}):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{DialogLoading:n(624).default,Snackbar:n(448).default})}}]);